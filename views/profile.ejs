<!doctype html>

<html>

<head>

	<title>Node Authentication</title>

	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.min.css">
	<link rel="stlyesheet" href="../stylesheets/main.css">

	<style>

		body 		{ padding-top:80px; word-wrap:break-word; }

		.modal {
		    display: none; /* Hidden by default */
		    position: fixed; /* Stay in place */
		    z-index: 1; /* Sit on top */
		    padding-top: 100px; /* Location of the box */
		    left: 0;
		    top: 0;
		    width: 100%; /* Full width */
		    height: 100%; /* Full height */
		    overflow: auto; /* Enable scroll if needed */
		    background-color: rgb(0,0,0); /* Fallback color */
		    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
		}

		/* Modal Content */
		.modal-content {
		    background-color: #fefefe;
		    margin: auto;
		    padding: 20px;
		    border: 1px solid #888;
		    width: 80%;
		}

		/* The Close Button */
		.close {
		    color: #aaaaaa;
		    float: right;
		    font-size: 28px;
		    font-weight: bold;
		}

		.close:hover,
		.close:focus {
		    color: #000;
		    text-decoration: none;
		    cursor: pointer;
		}

		table {
		    font-family: arial, sans-serif;
		    border-collapse: collapse;
		    width: 100%;
		}

		td, th {
		    border: 1px solid #dddddd;
		    text-align: left;
		    padding: 8px;
		}

		tr:nth-child(even) {
		    background-color: #dddddd;
		}

	</style>

</head>

<body>

<div class="container">



	<div class="page-header text-center">

		<h1><span class="fa fa-anchor"></span> Profile Page</h1>

    <a href="/auth/main" class="btn btn-default btn-sm">Home</a>

		<a href="/auth/logout" class="btn btn-default btn-sm">Logout</a>

	</div>



	<div class="row">



		<!-- LOCAL INFORMATION -->
		<div class="container">
			<div class="col-sm-6">

				<div class="well">

					<h3><span class="fa fa-user"></span> Local</h3>



						<p>

							<strong>id</strong>: <%= user._id %><br>

							<strong>username</strong>: <%= user.username %><br>

							<strong>password</strong>: <%= user.password %><br>

							<strong>email</strong>: <%= user.email %><br>

							<strong>name</strong>: <%= user.name %>

						</p>


				</div>

			</div>

	    <div class="col-sm-6">

				<div class="well">

					<h3><span class="fa fa-mail-forward"></span> File Upload</h3>

	        <form action="/auth/upload" class="form" method="post" enctype="multipart/form-data">

	          <div class="form-group">

	            <input type="file" class="form" name="file" required="true"></input>

	          </div>

	          <button type="submit" class="btn btn-primary">Submit</button>

	        </form>
					<button id="myBtn" class="btn btn-danger">Delete Account</button>

				</div>


			</div>
		</div>
		<div class="col-md-12">
			<h2 style="text-align:center;">Files</h2>
			<% if(files){ %>
				<table style="width:100%">
				<% files.forEach(function(file){ %>
					<form action="/auth/file/<%= file._id.originalname%>/<%= file._id.userId %>" class="col-md-2" method="post">
					  <tr>
					    <th><input type="text" class="form" name="originalname" required="true" value="<%= file._id.originalname %>" disabled></input></th>
					    <th><input type="text" class="form" name="userId" required="true" value="<%= file._id.userId %>" disabled></input></th>
					    <th>
								<button type="submit" class="btn btn-primary">Download</button>
					</form>
					<form class="col-md-2" action="/auth/file/delete/<%= file._id.originalname%>/<%= file._id.userId %>?_method=DELETE" method="POST">
						<button class="btn btn-danger">Delete</button>
					</form>
							</th>
					  </tr>
				<% }) %>
			</table>
			<% }else{ %>
				<p>No files found</p>
			<% } %>
		</div>



	</div>



</div>
<div id="myModal" class="modal">

	<!-- Modal content -->
	<div class="modal-content">
		<span class="close">&times;</span>
		<p>Are you sure you want to deactivate your account?</p>
		<form action="/auth/goodbye" method="post">
			<button type="submit" class="btn btn-danger"><span class="fa fa-frown-o"></span> Yes</button>  <button class="btn btn-success"><span class="fa fa-smile-o"></span> No</button>
		</form>
	</div>

</div>

<script type="text/javascript">
	// Get the modal
	var modal = document.getElementById('myModal');

	// Get the button that opens the modal
	var btn = document.getElementById("myBtn");

	// Get the <span> element that closes the modal
	var span = document.getElementsByClassName("close")[0];

	// When the user clicks on the button, open the modal
	btn.onclick = function() {
		modal.style.display = "block";
	}

	// When the user clicks on <span> (x), close the modal
	span.onclick = function() {
		modal.style.display = "none";
	}

	// When the user clicks anywhere outside of the modal, close it
	window.onclick = function(event) {
		if (event.target == modal) {
				modal.style.display = "none";
		}
	}
</script>

</body>

</html>
